<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.10.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mineserver: Plugins</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="atom-one-dark.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
  <script type="text/javascript" src="highlight.js"></script>
  <script type="text/javascript">
    if (window.location.href.indexOf("source") === -1) {
      $(function () {
        $(".fragment").each(function (i, node) {
          var $node = $(node);
          $node.html("<pre><code class='" +
            $node.attr("class") + "'>" +
            $node.text() + "</code></pre>");
          hljs.highlightElement(node);
          $node.wrap("<pre></pre>");
        });
      });
    }
  </script>
  <style>
    .lineno {
      display: none;
    }
  </style>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectlogo"><img alt="Logo" src="icon.png" /></td>
              <td id="projectalign">
                <div id="projectname">Mineserver
                </div>
                <div id="projectbrief">A rewrite of Minecraft 1.8.9 in C++ !</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part --><!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_docs_2__3__PLUGINS.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Plugins</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md16">Basics</a></li>
<li class="level1"><a href="#autotoc_md17">Events</a></li>
<li class="level1"><a href="#autotoc_md18">Access to classes</a><ul><li class="level2"><a href="#autotoc_md19">Generally</a></li>
<li class="level2"><a href="#autotoc_md20">Config</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md21">Libraries Warning</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="autotoc_md15"></a></p>
<p>You can make custom plugins for your server in <a href="https://www.lua.org/about.html">Lua</a>. We chose Lua because it is fast, lightweight, easy to learn and more importantly easy to use on top of C++.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Basics</h1>
<p>First of all, you need to name your plugin and give it a version. The filename of your file doesn't matter, the name that will be displayed inside the game will be retrieved from the Lua file. You can access the current plugin running metadata as such :</p>
<div class="fragment"><div class="line">-- The following two lines should be at the top of your file</div>
<div class="line">plugin.name = &quot;Random plugin name&quot;</div>
<div class="line">plugin.version = &quot;1.0.0&quot;</div>
<div class="line"> </div>
<div class="line">-- Here it is just for show sake</div>
<div class="line">print(&quot;Plugin path is &quot; .. plugin.path)</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md17"></a>
Events</h1>
<p>You can listen to all the events listed in the <a class="el" href="dir_9d2e58768472232ed3174312c9931ffa.html">events directory</a>. Go click on the individual files, look for the events you want to listen and you should be able to see in their documentation how to listen for the event. Generally to listen for an event a class called <code>SimpleBasicEvent</code>, you do as follows : </p><div class="fragment"><div class="line">local function canBeAnything(e)</div>
<div class="line">    -- do your thing</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line">-- register the function as a listener</div>
<div class="line">event.onSimpleBasic(canBeAnything)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md18"></a>
Access to classes</h1>
<p>You can normally access all of the classes of the server. It is still at a development stage so not everything is well connected and not everything will have a lua equivalent. There are still few things you can do though.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Generally</h2>
<p>If it is not specified in the class documentation, you can access a class fields like they are written. For exemple, for the <a class="el" href="classHandshakePacket.html">Handshake Packet class</a>, you can access its <a class="el" href="classHandshakePacket.html#a96b7a2867a9f3717a70caecbd58d6804">Next State field</a> field like this, after for exemple registering for the <a class="el" href="classClientHandshakeEvent.html">Client Handshake Event</a> : </p><div class="fragment"><div class="line">local function onStatus(e)</div>
<div class="line">    -- do your thing, like printing the client protocol version</div>
<div class="line">    print(&quot;Client protocol version : &quot; .. e.packet.protocolVersion)</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line">event.onClientHandshake(onStatus)</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md20"></a>
Config</h2>
<p>You can access any fields of the config using the following manner. If you want to access <a class="el" href="classConfig.html#a6d3f8fa249a5909b1fdf1c209c449312">the max players field</a> for exemple, refer to the <a class="el" href="md_docs_2__2__CONFIG.html">Config Documentation</a> and get the category of the field and its name so that if you want to access it, you do : </p><div class="fragment"><div class="line">config.&amp;lt;category&amp;gt;.&amp;lt;fieldname&amp;gt;</div>
</div><!-- fragment --><p> For exemple, for the max players field in the <a class="el" href="md_docs_2__2__CONFIG.html#config_server_category">server category</a> : </p><div class="fragment"><div class="line">-- Accessing field</div>
<div class="line">config.server.max_players</div>
<div class="line"> </div>
<div class="line">print(&quot;Max number of players : &quot; .. config.server.max_players)</div>
<div class="line"> </div>
<div class="line">-- Lets add 10</div>
<div class="line">config.server.max_players = config.server.max_players + 10</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md21"></a>
Libraries Warning</h1>
<p>All default libraries are opened on the lua file. So beware of what files you install because they can use libraries like <code>os</code> that can modify files on your computer. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Feb 9 2024 18:44:51 for Mineserver by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
